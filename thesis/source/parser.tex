%%
%% $Id$
%%
%% Copyright (c) 2007-2008 Christian Fehler
%% Copyright (c) 2007-2008 Benjamin Mies
%%


\chapter{Parser}\label{Parser}

Zu Beginn der Planungen für das \gtitool stellte sich die Frage, wie der
Benutzer die verschiedenen benötigten Eingaben machen soll. Es wurden
verschiedene Möglichkeiten in Betracht gezogen, schließlich wurde aber das
Verwenden von Parsern bevorzugt. Der Vorteil von Parsern ist, dass der Benutzer
in seinen Eingaben, für zum Beispiel ein Alphabet, so wenig wie möglich
beschränkt wird. Dies wäre nicht der Fall gewesen, wenn zum Beispiel nur eine
Auswahl von Symbolen zur Verfügung gestanden hätte.\vspace{10pt}

%### removes texlipse warning
Zur Erzeugung der Parser wurde der CUP Parser Generator für Java verwendet, siehe
\cite{java-cup}. Als Lexer wurde wegen dem guten Zusammenspiel mit dem
verwendeten Parser JFlex benutzt, siehe \cite{jflex}.\vspace{10pt}
%### removes texlipse warning

In diesem Kapitel werden die Besonderheiten der Parser angesprochen, vor allem
das Prüfen der kontextsensitiven Bedingungen und das Anpassen der verwendeten
Darstellungsweise. Desweiteren mussten auch Bedingungen geprüft werden, die im
Zusammenhang mit dem verwendeten Automaten bzw. der Grammatik
stehen.\vspace{10pt}

Wird eine solche Bedingung verletzt, kann der Benutzer den geöffneten Dialog
nicht mehr bestätigen und ist gezwungen, den Fehler zu beheben, oder die
Bearbeitung abzubrechen. Es besteht also kein Unterschied zwischen der
Behandlung eines Fehlers im Scanner, Parser oder den kontextsensitiven
Bedingungen.\vspace{10pt}


\section{Kontextsensitive Bedingungen}

In diesem Abschnitt geht es darum, welche kontextsensitiven Bedingungen
über\-prüft werden müssen, um dem Benutzer zu verdeutlichen, welche Eingaben
in aktuellen Kontext nicht getroffen werden können. Ein wichtiger Aspekt dabei
ist, dass der Benutzer dabei darauf hingewiesen wird, warum seine Eingabe
abgelehnt wird.\vspace{10pt}

Im \gtitool gibt es an verschiedenen Stellen die Möglichkeit ein Alphabet
einzugeben. Betrachten wir als erstes das Eingeben des Alphabetes im Dialog für
die Einstellungen, da dieser Parser die wenigsten kontextsensitiven Bedingungen
berücksichtigen muss. Sowohl beim Eingabe Alphabet, wie auch beim Keller
Alphabet ist die einzige Bedingung, dass ein Symbol nicht doppelt vorkommen
darf, eine Eingabe \{\Symbol{0}, \Symbol{0}\} ist somit nicht
zulässig.\vspace{10pt}

Ebenfalls in den Einstellungen zu finden ist die Eingabe der
Nichtterminalzeichen, Terminalzeichen und des Startsymbols. Genau wie bei dem
Alphabet, darf auch hier ein Nichtterminalzeichen bzw. ein Terminalzeichen nur
einmal in der Menge vorkommen. Zusätzlich muss aber gelten, dass die Menge der
Nichtterminalzeichen  und die Menge der Terminalzeichen disjunkt sein müssen. Es
ist dem Benutzer somit nicht erlaubt bei den Nichtterminalzeichen
\{\NonterminalSymbol{E}, \NonterminalSymbol{a}\} und gleichzeitig
\{\TerminalSymbol{a}, \TerminalSymbol{b}\} bei den Terminalzeichen einzutragen.
Versucht der Benutzer eine solche Eingabe vorzunehmen, bekommt er zum Beispiel
bei den Nichtterminalzeichen angezeigt, dass \NonterminalSymbol{a} bereits ein
Terminalzeichen ist, bzw. umgekehrt, wenn zuerst das Nichtterminalzeichen
vorhanden war. Eine weitere Bedingung ist, dass das Startsymbol aus der Menge der
Nichtterminalzeichen sein muss, auch diese Bedingung wird überprüft und bei
Verletzung mit einer Fehlermeldung behandelt.\vspace{10pt}

Eine weitere Kontextbedingung wird überprüft, wenn das Alphabet eines
bestehenden Automaten bearbeitet wird. Dabei darf der Benutzer beliebige, aber
noch nicht verwendete, Symbole ergänzen. Er darf allerdings keine Symbole
entfernen, die noch von einem Übergang benutzt werden. Soll dies geschehen,
muss der Benutzer erst das Symbol aus allen Übergängen entfernen,
anschließend kann es aus dem Alphabet entfernt werden.\vspace{10pt}

Gleiches gilt für das Bearbeiten der Nichtterminalzeichen und Terminalzeichen
einer bestehenden Grammatik. Auch hier wird überprüft, ob das Zeichen in einer
der Produktionen benutzt wird, ist dies der Fall, kann es nicht entfernt
werden.\vspace{10pt}

Ein ähnliches Prinzip wird bei einigen anderen Parser verwendet, so zum
Beispiel das Keller Lese-Wort bzw. das Keller Schreib-Wort. Auch dort müssen
die verwendeten Symbole im Keller Alphabet vorkommen.\vspace{10pt}


\section{Anpassung der Darstellungsweise}

Um dem Benutzer das Arbeiten mit Grammatiken einfacher und übersichtlicher zu
machen, wurde die Darstellungsweise der Nichtterminalzeichen und
Terminalzeichen unterschiedlich gestaltet. So wird das Startsymbol in einer
anderen Farbe dargestellt, als die anderen Nichtterminalzeichen. Der Benutzer
ist somit in der Lage in den normalen Produktionen zu erkennen, ob ein
Nichtterminalzeichen das Startsymbol ist oder nicht. Da sich normalerweise der
Scanner um die Darstellungsweise eines Symbols kümmert, musste dies angepasst
werden, da der Scanner weder Terminalzeichen, noch Nichtterminalzeicher oder
das Startsymbol auseinander halten kann.\vspace{10pt}

Das Problem wurde so gelöst, dass zum Beispiel dem Scanner der
Nichtterminalzeichen mitgegeben wurde, bei welchem Zeichen es sich um das
Startsymbol handelt. Ein weiteres Beispiel ist die rechte Seite einer
Produktion. Um dem Benutzer auch hier eine Unterscheidung der Symbole leicht zu
machen, muss hier eine farbliche Unterscheidung zwischen Terminalzeichen,
Nichtterminalzeichen und dem Startsymbol erfolgen. Auch dieses Problem wurde auf
die oben genannte Art und Weise gelöst.\vspace{10pt}
